<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Appointments</h2>
        <ol class="breadcrumb">
            <li>
                <a href="<%= root_path %>">Home</a>
            </li>
            <li class="active">
                <strong>Appointments</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">
        <a href="<%= new_appointment_path %>" class="btn btn-primary pull-right" style="margin: 30px 0 0 0;"><i class="fa fa-plus"></i> Add appointment</a>
    </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">

                    <div class="">
                    </div>
                    
                    <table class="table table-striped table-bordered table-hover " id="tbl-appointments">
                        <thead>
                            <tr>
                                <th>Patient ID</th>
                                <th>Patient Name</th>
                                <th>Record Date</th>
                                <th>Complaint</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% @appointments.each do |appointment|  %>
                                <tr class="gradeX">
                                    <td><%= appointment.patient_id %></td>
                                    <td><%= appointment.last_name %>, <%= appointment.first_name %> <%= appointment.middle_name %></td>
                                    <td><%= format_date(appointment.consultation_date, "%Y %B %d") %></td>
                                    <td><%= appointment.complaint %></td>
                                    <td><%= appointment.status.titlecase %></td>
                                    <td class="center">
                                        <a href="javascript:void(0);" class="btn btn-primary btn-xs btn-update" data-appointment="<%= appointment.to_json %>"><i class="fa fa-pencil-square-o"></i></a>
                                    </td>
                                </tr>
                            <% end %>
                        </tbody>
                        <tfoot>
                            <tr>
                                <th>Patient ID</th>
                                <th>Patient Name</th>
                                <th>Record Date</th>
                                <th>Complaint</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="mdl-appointment" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title"><i class="fa fa-calendar"></i> <span id="mdl-header">Manage Appointment</span></h4>
      </div>
      <%= form_tag({}, {:method => :put, :id => "frm-appointment"}) do %>
        <div class="modal-body">
           <div class="form-group">
                <label class="control-label lbl-consultation-date">Consultation Date *</label>
                <div id="fld-consultation-date">
                    <div class="input-group date">
                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        <%= text_field_tag "appointment[consultation_date]", "", :class => "form-control required", :data => { :name => "consultation-date" } %>
                    </div>
                </div>
            </div>
            <div class="form-group">
                 <div class="row">
                    <div class="col-md-4">
                        <label class="control-label lbl-systolic">Systolic *</label>
                        <%= text_field_tag "appointment[systolic]", "120", :class => "form-control touchspin required", :data => { :name => "systolic" } %>
                    </div>
                    <div class="col-md-4">
                        <label class="control-label lbl-diastolic">Diastolic *</label>
                        <%= text_field_tag "appointment[diastolic]", "80", :class => "form-control touchspin required", :data => { :name => "diastolic" } %>
                    </div>
                    <div class="col-md-4">
                        <label class="control-label lbl-weight">Weight (kg) *</label>
                        <%= text_field_tag "appointment[weight]", "", :class => "form-control required", :data => { :name => "weight" } %>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-12">
                        <label class="control-label lbl-complaint">Chief Complaint</label>
                        <%= text_area_tag "appointment[complaint]", "", :class => "form-control required", :style => "height: 100px;", :data => { :name => "complaint" } %>
                    </div>
                </div>
            </div>
      </div>
      <div class="modal-footer">
          <div class="col-md-6 mp0i">
                <%= select_tag("appointment[status]", options_for_select(Appointment.statuses.collect{ |k, v| [k.humanize.titlecase, k]}), { :class => 'form-control m-b pull-left' }) %>
          </div>
          <div class="col-md-6 mp0i">
              <button type="submit" class="btn btn-primary" >Update</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          </div>
      </div>
      <% end%>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
